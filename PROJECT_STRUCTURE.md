# 專案結構說明

```
taiwan-stock-tracker/
│
├── .github/
│   └── workflows/
│       └── stock_analysis.yml      # GitHub Actions 自動化設定
│
├── StockInfo/                      # 資料儲存目錄
│   ├── tse_company_list.csv       # [必要] 上市公司清單
│   ├── otc_company_list.csv       # [必要] 上櫃公司清單
│   ├── TSE_buy_ranking.txt        # [必要] 上市買超排行
│   ├── OTC_buy_ranking.txt        # [必要] 上櫃買超排行
│   ├── TSE_hotstock_data.json     # [自動生成] 上市熱門股票
│   ├── OTC_hotstock_data.json     # [自動生成] 上櫃熱門股票
│   └── twstock_news.json          # [自動生成] 台股新聞資料
│
├── stock_analysis.py               # 主程式 - 股票分析爬蟲
├── index.html                      # 網頁介面 - 資料視覺化
├── requirements.txt                # Python 套件清單
├── .gitignore                      # Git 忽略檔案設定
├── README.md                       # 專案說明文件
└── DEPLOYMENT_GUIDE.md            # 部署指南

```

## 檔案說明

### 核心檔案

| 檔案 | 類型 | 說明 |
|------|------|------|
| `stock_analysis.py` | Python | 主要執行程式,負責爬取新聞、分析股票、抓取股價 |
| `index.html` | HTML | 網頁展示介面,提供視覺化的股票追蹤功能 |
| `requirements.txt` | Text | Python 相依套件清單 |

### GitHub Actions 設定

| 檔案 | 說明 |
|------|------|
| `.github/workflows/stock_analysis.yml` | 自動化執行設定,控制每天的執行時間 |

### 輸入資料 (需手動準備)

| 檔案 | 格式 | 說明 | 更新頻率 |
|------|------|------|----------|
| `tse_company_list.csv` | CSV | 上市公司代碼、名稱、產業 | 月度更新 |
| `otc_company_list.csv` | CSV | 上櫃公司代碼、名稱、產業 | 月度更新 |
| `TSE_buy_ranking.txt` | TXT | 上市三大法人買超排行 | 每日更新 |
| `OTC_buy_ranking.txt` | TXT | 上櫃三大法人買超排行 | 每日更新 |

### 輸出資料 (自動生成)

| 檔案 | 格式 | 說明 | 更新頻率 |
|------|------|------|----------|
| `TSE_hotstock_data.json` | JSON | 上市熱門股票完整資料 | 每小時 |
| `OTC_hotstock_data.json` | JSON | 上櫃熱門股票完整資料 | 每小時 |
| `twstock_news.json` | JSON | 24小時內台股新聞 | 每小時 |

## 資料流程

```
┌─────────────────────┐
│  新聞網站爬蟲       │
│  cmnews.com.tw      │
└──────────┬──────────┘
           │
           ▼
┌─────────────────────┐
│  分析新聞中的股票   │
│  統計提及次數       │
└──────────┬──────────┘
           │
           ▼
┌─────────────────────┐      ┌──────────────────┐
│  讀取買超排行資料   │◄─────│ TSE/OTC 買超排行 │
└──────────┬──────────┘      └──────────────────┘
           │
           ▼
┌─────────────────────┐
│  合併新聞股+買超股  │
│  去除重複           │
└──────────┬──────────┘
           │
           ▼
┌─────────────────────┐
│  Yahoo 股市爬蟲     │
│  抓取即時股價       │
└──────────┬──────────┘
           │
           ▼
┌─────────────────────┐
│  生成 JSON 檔案     │
│  TSE + OTC          │
└──────────┬──────────┘
           │
           ▼
┌─────────────────────┐
│  GitHub Pages       │
│  網頁自動載入顯示   │
└─────────────────────┘
```

## 執行流程

### 1. GitHub Actions 觸發
```
時間到達 (09:00, 10:00, 11:00, 12:00)
    ↓
觸發 workflow
    ↓
啟動 Ubuntu 容器
```

### 2. 環境設置
```
Checkout 程式碼
    ↓
安裝 Python 3.10
    ↓
安裝相依套件 (requests, BeautifulSoup, pandas...)
    ↓
確認 StockInfo 資料夾存在
```

### 3. 執行分析
```
執行 stock_analysis.py
    ↓
├─ 爬取新聞 (cmnews)
├─ 載入公司清單 (CSV)
├─ 載入買超排行 (TXT)
├─ 分析並合併股票
├─ 抓取股價 (Yahoo)
└─ 生成 JSON 檔案
```

### 4. 提交結果
```
Git commit
    ↓
Git push
    ↓
更新 Repository
    ↓
GitHub Pages 自動更新
```

## 關鍵時間點

| 時間 (台北) | 動作 | 說明 |
|-------------|------|------|
| 09:00 | 第一次執行 | 開盤前更新 |
| 10:00 | 第二次執行 | 開盤後更新 |
| 11:00 | 第三次執行 | 盤中更新 |
| 12:00 | 第四次執行 | 午盤更新 |
| 週六 | 不執行 | 休市日 |

## 資源使用

| 項目 | 用量 | 限制 |
|------|------|------|
| GitHub Actions 執行時間 | ~5 分鐘/次 | 2000 分鐘/月 (免費版) |
| Repository 大小 | ~10 MB | 建議 < 1 GB |
| 單一檔案大小 | ~100 KB/JSON | 建議 < 100 MB |
| GitHub Pages 頻寬 | ~1 MB/天 | 100 GB/月 |

## 監控要點

### ✅ 每日檢查
- [ ] Actions 是否正常執行
- [ ] JSON 檔案是否正常生成
- [ ] 網頁是否正常顯示

### ✅ 每週檢查
- [ ] 更新買超排行資料
- [ ] 檢查爬蟲是否正常
- [ ] 查看 Actions 執行歷史

### ✅ 每月檢查
- [ ] 更新公司清單
- [ ] 檢查 Actions 使用量
- [ ] 備份重要資料

## 擴展功能建議

### 短期 (1-2 週可實現)
- [ ] 加入更多新聞來源
- [ ] 增加股票技術指標
- [ ] 加入歷史資料圖表

### 中期 (1-2 月可實現)
- [ ] 加入自選股功能
- [ ] 增加 Email 通知
- [ ] 加入即時警示功能

### 長期 (3+ 月可實現)
- [ ] 建立資料庫儲存歷史
- [ ] 加入機器學習預測
- [ ] 開發手機 App

---

**版本**: 1.0.0  
**最後更新**: 2025-01-15  
**維護者**: Frank
